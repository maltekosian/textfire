/**
 * 
 */
package com.hogventure.game;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.util.ArrayList;

/**
 * @author aquila
 *
 */
class ListElement {
    
	int width = 600;
	int height = 0;
	int posX = 0;
	int posY = 0;
	ArrayList<String> texts;
	String iconRef;
	
	/**
	 * @param text
	 */
	public ListElement(String text) {
		this.texts = formatedText(text, this.width);
	}
	
	/**
	 * @param texts
	 * @param iconRef
	 */
	public GameListElement(String text, String iconRef) {
		this.texts = formatedText(text, this.width);
		this.iconRef = iconRef;
	}
	/**
	 * iconRef ...
	 * @param g
	 */
	public void draw(Graphics2D g) {
		g.setColor(new Color(Game.globalPreferences.boxColor ,true));
		g.fillRoundRect(posX, posY, width, height, 
			Game.globalPreferences.roundRectSize, Game.globalPreferences.roundRectSize);
		g.setColor(new Color(Game.globalPreferences.borderColor ,true));
		g.setStroke(new BasicStroke(Game.globalPreferences.borderStroke));
		g.drawRoundRect(posX, posY, width, height, 
			Game.globalPreferences.roundRectSize, Game.globalPreferences.roundRectSize);
		
		g.setColor(new Color(Game.globalPreferences.fontColor ,true));
		g.setFont(new Font(Game.globalPreferences.fontFamily, Game.globalPreferences.fontWeight, Game.globalPreferences.fontSize));
		int i = 0;
		int h = heiht / texts.size();

		for (String txt: texts ) {
			i++; 
			if ( i == 1 && iconRef != null) {
				if (Game.globalPreferences.hasShadow) {
					g.setColor(new Color(Game.globalPreferences.shadowColor ,true));
					g.drawString(txt, posX  + 64 + Game.globalPreferences.boxPadding + 1, posY + 1 + i * (h-2) );
					g.setColor(new Color(Game.globalPreferences.fontColor ,true));
				}   
				g.drawString(txt, posX + 64 + Game.globalPreferences.boxPadding, posY + i * (h-2) );
			} else {
				if (Game.globalPreferences.hasShadow) {
					g.setColor(new Color(Game.globalPreferences.shadowColor ,true));
					g.drawString(txt, posX + 1, posY + 1 + i * (h-2) );
					g.setColor(new Color(Game.globalPreferences.fontColor ,true));
				}   
				g.drawString(txt, posX, posY + i * (h-2) );
			}
			
			
		}
	}
	/**
	 * poor and not realy right ... iconRef missing
	 * using globalPrefences.roundRectSize, globalPrefences.boxPadding
	 * @param text
	 * @param width
	 * @return
	 */
	ArrayList<String> formatedText(String text, int width) {
		ArrayList<String> alString = new ArrayList<String>();
		int _width = width - 2 * globalPrefences.roundRectSize - 2 * globalPrefences.boxPadding;
		int w = 0;
		String[] _txt = text.split(" ");
		String s  = null;
		int i = 0;
		int h = g.getFontMetrics.getLeading() + g.getFontMetrics.getAscent() + g.getFontMetrics.getDescent() + 2;
		while (i < _txt.length) {
		     
			w = g.getFontMetrics().getWidth(s+" "+txt[i]);
			if (w < width) {
			    alString.add(s);
				s = txt[i];
				w = g.getFontMetrics().getWidth(s);
				height = height + h;
			} else {
				s = s+" "+txt[i];    
			}
			
			i++;
		}
		height = height + h;
		alString.add(s);
		return alString;
	}
	/**
	 * 	may set a mouseclick effect or a mouseover effect or will cause a game event
	 * @param x
	 * @param y
	 * @return
	 */
	public boolean isHit(int x, int y) {
		return (posX < x && x < posX + width && posY < y && y < posY + height);
	}
}